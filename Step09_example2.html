<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step09_example2.html</title>
    <style>
        canvas{
            border: 1px solid cadetblue;
        }
    </style>
</head>
<body>
    <h1>그림판 만들기</h1>
    <canvas id = "myCanvas" width="1100" height="1500"></canvas>
    <div>
        색상<input type="color" id = "selectedColor"/>
        굵기<input type="range" id = "selectedWidth"/>
    </div>
    <script>
        // canvas 의 참조값 얻어오기
        var canvas = document.querySelector("#myCanvas");
        // canvs 에 그림을 그릴수 있는 도구의 참조값 얻어오기
        var context= canvas.getContext("2d");

        //현재 그림을 그리고 있는 상태인지 여부를 관리할
        //변수를 선언하고 초기값 부여하기
        var isDrawing = false;

        var thisColor="#00000";
        var thisWidth = 5;

        //부드럽게 그려지게
        context.lineCap = "round";
        context.lineJoin = "round";

        document.querySelector("#myCanvas")
        .addEventListener("mousedown", function(event){
            //이벤트가 일어난 좌표에서 선을 그릴 준비를 한다.
            var x = event.offsetX;
            var y = event.offsetY;
            context.beginPath()
            context.strokeStyle = thisColor;
            context.lineWidth = thisWidth;  
            context.moveTo(x,y);
            isDrawing = true;
        });
        document.querySelector("#myCanvas")
        .addEventListener("mousemove", function(event){
            //만일 현재 그리고 있는 상태가 아니면 함수를 여기서 종료한다.
            if(!isDrawing){
                return; 
            }
            //이벤트가 일어난 좌표까지 선을 그린다.
            var x = event.offsetX;
            var y = event.offsetY;
            //해당 좌표 까지 선을 이어준다.
            context.lineTo(x,y);
            context.stroke();
            
        });
        document.querySelector("#myCanvas")
        .addEventListener("mouseup", function(){
            //더 이상 선이 그려지지 않도록 한다.
            isDrawing = false;
            context.closePath();
        });
    </script>
</body>
</html>